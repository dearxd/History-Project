<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="../../js/vue.js"></script>
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <style>

    </style>
    <script>
        $(document).ready(function() {
            var aBtn = $('.aBtn');
            var aBox = $('.box');
            var box = '<div class="clearfix">' +
                '<label class="col-sm-2 control-label">' +
                '<span class="add-child">+</span>提取正则</label>' +
                '<div class="col-sm-8">' +
                '<textarea name="log_regex" id="log_regex" rows="3" class="form-control"></textarea>' +
                '</div>' +
                '<div class="col-sm-2">' +
                '<button class="btn btn-sm btn-primary m-t-n-xs valid" style="margin-top:0px" type="button"><strong>验证正则</strong></button>' +
                '</div>' +
                '</div>';
            var add = (function() {
                var con;
                return function() {
                    if (!con) {
                        con = box;
                    }
                    return con;
                }
            })()
            aBtn.on('click', function() {
                aBox.append(add());
            });
            $('.box').on('click', 'button', function() {
                var a = $(this).closest('.col-sm-2').prev('.col-sm-8').find('textarea').val();
                console.log(a);
            })
        })
    </script>
</head>

<body>
    <div>
        <div class="box">
            <button class="aBtn">添加</button>
        </div>
    </div>

</body>

</html>